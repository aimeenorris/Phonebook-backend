{"version":3,"sources":["components/Button.js","components/Person.js","components/Filter.js","components/Notification.js","services/phonebook.js","App.js","index.js"],"names":["Button","onClick","text","console","log","onclick","Person","person","onDelete","key","id","name","number","People","peopleToShow","map","Filter","props","value","filterCriteria","onChange","handleFilterChange","ErrorNotification","message","className","InfoNotification","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","errorMessage","setErrorMessage","infoMessage","setInfoMessage","setFilterCriteria","useEffect","phonebookService","length","filter","toLowerCase","includes","event","target","onSubmit","preventDefault","some","window","confirm","foundPerson","find","n","changedPerson","returnedPerson","setTimeout","catch","error","personObject","concat","type","request","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1c3e88ee.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Button = ({ onClick, text }) => {\r\n  console.log(`Rendering button. onclick=${onclick}`);\r\n  return (\r\n    <>\r\n      <button onClick={onClick}>{text}</button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\nimport Button from \"./Button\";\r\n\r\nconst People = ({ peopleToShow, onDelete }) => {\r\n  return (\r\n    <div>\r\n      {peopleToShow.map((person) => (\r\n        <Person\r\n          key={person.id}\r\n          person={person}\r\n          onDelete={() => onDelete(person.id, person.name)}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Person = ({ person, onDelete }) => {\r\n  return (\r\n    <li key={person.id}>\r\n      {person.name} {person.number} {\"  \"}\r\n      <Button onClick={onDelete} text=\"Delete\" />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default People;\r\n","import React from \"react\";\r\n\r\nconst Filter = (props) => {\r\n  return (\r\n    <div>\r\n      filter shown with:\r\n      <input value={props.filterCriteria} onChange={props.handleFilterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst ErrorNotification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className=\"error\">{message}</div>;\r\n};\r\n\r\nconst InfoNotification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className=\"message\">{message}</div>;\r\n};\r\nexport { ErrorNotification, InfoNotification };\r\n","import axios from \"axios\";\r\n\r\n//const baseUrl = \"http://localhost:3001/persons\";\r\n\r\n// Changed so the phonebook front end would work with the phonebook back end\r\n//const baseUrl = \"http://localhost:3001/api/persons\";\r\n\r\n// Changing to work with phonebook backend on heroku\r\nconst baseUrl = \"https://sleepy-wildwood-05846.herokuapp.com/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response);\r\n};\r\n\r\nexport default { getAll, create, update, remove };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport People from \"./components/Person\";\r\nimport Filter from \"./components/Filter\";\r\nimport { ErrorNotification, InfoNotification } from \"./components/Notification\";\r\nimport phonebookService from \"./services/phonebook\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [infoMessage, setInfoMessage] = useState(null);\r\n  const [filterCriteria, setFilterCriteria] = useState(\"\");\r\n\r\n  const hook = () => {\r\n    console.log(\"effect\");\r\n    phonebookService.getAll().then((persons) => {\r\n      console.log(\"promise fulfilled\");\r\n      setPersons(persons);\r\n    });\r\n  };\r\n\r\n  useEffect(hook, []);\r\n  console.log(\"render\", persons.length, \"persons\");\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    console.log(\"button clicked\", event.target);\r\n    if (persons.some((person) => person.name === newName)) {\r\n      if (\r\n        window.confirm(\r\n          `${newName} is already added to the phonebook, replace the old number with a new one?`\r\n        ) === true\r\n      ) {\r\n        const foundPerson = persons.find((n) => n.name === newName);\r\n        const changedPerson = { ...foundPerson, number: newNumber };\r\n\r\n        phonebookService\r\n          .update(changedPerson.id, changedPerson)\r\n          .then((returnedPerson) => {\r\n            console.log(\"updated person\");\r\n            setPersons(\r\n              persons.map((person) =>\r\n                person.name !== newName ? person : returnedPerson\r\n              )\r\n            );\r\n            setInfoMessage(`Changed ${returnedPerson.name}'s number`);\r\n            setTimeout(() => {\r\n              setInfoMessage(null);\r\n            }, 5000);\r\n            setNewName(\"\");\r\n            setNewNumber(\"\");\r\n          })\r\n          .catch((error) => {\r\n            setErrorMessage(\r\n              `Information of ${changedPerson.name}' has already been removed from the server`\r\n            );\r\n            setNewName(\"\");\r\n            setNewNumber(\"\");\r\n            setTimeout(() => {\r\n              setErrorMessage(null);\r\n            }, 5000);\r\n          });\r\n      } else {\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n      }\r\n    } else {\r\n      const personObject = {\r\n        name: newName,\r\n        number: newNumber,\r\n        id: persons.length + 1,\r\n      };\r\n      phonebookService\r\n        .create(personObject)\r\n        .then((person) => {\r\n          console.log(\"added person\");\r\n          setPersons(persons.concat(personObject));\r\n          setInfoMessage(`Added ${personObject.name}`);\r\n          setTimeout(() => {\r\n            setInfoMessage(null);\r\n          }, 5000);\r\n          setNewName(\"\");\r\n          setNewNumber(\"\");\r\n        })\r\n        .catch((error) => {\r\n          setErrorMessage(`Error creating ${personObject.name}`);\r\n          setNewName(\"\");\r\n          setNewNumber(\"\");\r\n          setTimeout(() => {\r\n            setErrorMessage(null);\r\n          }, 5000);\r\n        });\r\n    }\r\n    console.log(persons);\r\n  };\r\n\r\n  const deletePerson = (id, name) => {\r\n    console.log(persons);\r\n    console.log(`button clicked for ${name}`);\r\n    if (window.confirm(`Delete ${name} ?`) === true) {\r\n      phonebookService\r\n        .remove(id)\r\n        .then((request) => {\r\n          console.log(\"deleted person\");\r\n          setPersons(persons.filter((n) => n.id !== id));\r\n          setInfoMessage(`Deleted ${name}`);\r\n          setTimeout(() => {\r\n            setInfoMessage(null);\r\n          }, 5000);\r\n        })\r\n        .catch((error) => {\r\n          setErrorMessage(`Error deleting`);\r\n          setNewName(\"\");\r\n          setNewNumber(\"\");\r\n          setTimeout(() => {\r\n            setErrorMessage(null);\r\n          }, 5000);\r\n        });\r\n    } else {\r\n      console.log(\"Delete canceled\");\r\n    }\r\n  };\r\n\r\n  const peopleToShow =\r\n    filterCriteria === \"\"\r\n      ? persons\r\n      : persons.filter((person) =>\r\n          person.name.toLowerCase().includes(filterCriteria.toLowerCase())\r\n        );\r\n\r\n  const handleNameChange = (event) => {\r\n    console.log(event.target.value);\r\n    setNewName(event.target.value);\r\n    console.log(`new name: ${newName}`);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    console.log(event.target.value);\r\n    setNewNumber(event.target.value);\r\n    console.log(`new number: ${newNumber}`);\r\n  };\r\n\r\n  const handleFilterChange = (event) => {\r\n    console.log(event.target.value);\r\n    setFilterCriteria(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2> Phonebook </h2>\r\n      <ErrorNotification message={errorMessage} />\r\n      <InfoNotification message={infoMessage} />\r\n      <Filter\r\n        filterCriteria={filterCriteria}\r\n        handleFilterChange={handleFilterChange}\r\n      />\r\n      <h2> Add a New Number</h2>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          <p>\r\n            name: <input value={newName} onChange={handleNameChange} />\r\n          </p>\r\n          <p>\r\n            number: <input value={newNumber} onChange={handleNumberChange} />\r\n          </p>\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">Add</button>\r\n        </div>\r\n      </form>\r\n      <h2>Numbers</h2>\r\n      <ul>\r\n        <People peopleToShow={peopleToShow} onDelete={deletePerson} />\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}